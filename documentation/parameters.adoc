:toc: left
:icons: font
:source-highlighter: prettify
:project_id: PDSL Pattern

= Extracting Parameters

There are several effective ways of extracting parameters in PDSL, the best choice depending on your use case.

== Simple use cases: Parser rules

If you need to extract a number from a sentence, you could do something like this:

TODO: Can we reference tokens directly inside other tokens?
```antlr4
lexer grammar ParameterLexer;

fragment WS: (EOF | [\n\r\t ]+);
NUMBER: [0-9]+;
SENTENCE_PARAMETER: 'I have the number"' NUMBER '"';
```

```antlr4
parser grammar ParameterParser;

options {tokenVocab=ProofOfConceptLexer;}

sentence: SENTENCE_PARAMETER;
```

== Avoiding Ambiguity: Island Grammars
TODO: We need an example with real ambiguity

ANTLR has the concept of _Island Grammars_. This essentially means you can make your lexer only look for a different set of tokens by putting it in a different 'mode'.


```antlr4
lexer grammar ProofOfConceptLexer;

fragment WS: (EOF | [\n\r\t ]+);
SENTENCE_WITH_PARAMETER: 'I have the number "' -> mode(PARAMETER);
OPTIONAL_END: 'and I love it!' WS;

mode PARAMETER;
  NUMBER: [0-9]+;
  CLOSE_QUOTE: '"' WS -> mode(DEFAULT_MODE);
```

```
parser grammar ProofOfConceptParser;
options {tokenVocab=ProofOfConceptLexer;}
sentence: SENTENCE_WITH_PARAMETER NUMBER CLOSE_QUOTE OPTIONAL_END?;
sentences: sentence+;
```

In this example
